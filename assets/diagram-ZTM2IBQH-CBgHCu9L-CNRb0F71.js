var t=Object.defineProperty,e=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(e,a,r)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,i=(t,i)=>{for(var s in i||(i={}))a.call(i,s)&&n(t,s,i[s]);if(e)for(var s of e(i))r.call(i,s)&&n(t,s,i[s]);return t};import{p as s}from"./chunk-353BL4L5-Dn_Y_Yna-5NZfdQ-i.js";import{_ as o,s as l,g as c,t as u,q as d,a as p,b as g,K as m,z as h,F as x,G as v,H as f,l as $,a1 as y}from"./mermaid.core-CAqkCmS1-AQd4nPr3.js";import{p as b}from"./treemap-75Q7IDZK-B2atdfMH-vUuNH2TI.js";import"./index-DPMV0OY5.js";import"./vue-vendor-D2t9Cmv9.js";import"./element-plus-B8hAHzIr.js";import"./utils-DeELuwUN.js";import"./_baseUniq-BXtq6_NW-cV737goo.js";import"./min-BngCxx8g-BevVRrdu.js";import"./clone-CEJtuQzg-Cy1EEalH.js";var w={showLegend:!0,ticks:5,max:null,min:0,graticule:"circle"},C={axes:[],curves:[],options:w},M=structuredClone(C),L=f.radar,O=o(()=>x(i(i({},L),v().radar)),"getConfig"),j=o(()=>M.axes,"getAxes"),k=o(()=>M.curves,"getCurves"),A=o(()=>M.options,"getOptions"),T=o(t=>{M.axes=t.map(t=>{var e;return{name:t.name,label:null!=(e=t.label)?e:t.name}})},"setAxes"),S=o(t=>{M.curves=t.map(t=>{var e;return{name:t.name,label:null!=(e=t.label)?e:t.name,entries:I(t.entries)}})},"setCurves"),I=o(t=>{if(null==t[0].axis)return t.map(t=>t.value);const e=j();if(0===e.length)throw new Error("Axes must be populated before curves for reference entries");return e.map(e=>{const a=t.find(t=>{var a;return(null==(a=t.axis)?void 0:a.$refText)===e.name});if(void 0===a)throw new Error("Missing entry for axis "+e.label);return a.value})},"computeCurveEntries"),P={getAxes:j,getCurves:k,getOptions:A,setAxes:T,setCurves:S,setOptions:o(t=>{var e,a,r,n,i,s,o,l,c,u;const d=t.reduce((t,e)=>(t[e.name]=e,t),{});M.options={showLegend:null!=(e=null==(s=d.showLegend)?void 0:s.value)?e:w.showLegend,ticks:null!=(a=null==(o=d.ticks)?void 0:o.value)?a:w.ticks,max:null!=(r=null==(l=d.max)?void 0:l.value)?r:w.max,min:null!=(n=null==(c=d.min)?void 0:c.value)?n:w.min,graticule:null!=(i=null==(u=d.graticule)?void 0:u.value)?i:w.graticule}},"setOptions"),getConfig:O,clear:o(()=>{h(),M=structuredClone(C)},"clear"),setAccTitle:g,getAccTitle:p,setDiagramTitle:d,getDiagramTitle:u,getAccDescription:c,setAccDescription:l},E=o(t=>{s(t,P);const{axes:e,curves:a,options:r}=t;P.setAxes(e),P.setCurves(a),P.setOptions(r)},"populate"),z={parse:o(t=>{return e=null,a=null,r=function*(){const e=yield b("radar",t);$.debug(e),E(e)},new Promise((t,n)=>{var i=t=>{try{o(r.next(t))}catch(e){n(e)}},s=t=>{try{o(r.throw(t))}catch(e){n(e)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,s);o((r=r.apply(e,a)).next())});var e,a,r},"parse")},F=o((t,e,a,r)=>{var n;const i=r.db,s=i.getAxes(),o=i.getCurves(),l=i.getOptions(),c=i.getConfig(),u=i.getDiagramTitle(),d=m(e),p=B(d,c),g=null!=(n=l.max)?n:Math.max(...o.map(t=>Math.max(...t.entries))),h=l.min,x=Math.min(c.width,c.height)/2;D(p,s,x,l.ticks,l.graticule),_(p,s,x,c),R(p,s,o,h,g,l.graticule,c),W(p,o,l.showLegend,c),p.append("text").attr("class","radarTitle").text(u).attr("x",0).attr("y",-c.height/2-c.marginTop)},"draw"),B=o((t,e)=>{const a=e.width+e.marginLeft+e.marginRight,r=e.height+e.marginTop+e.marginBottom,n=e.marginLeft+e.width/2,i=e.marginTop+e.height/2;return t.attr("viewbox",`0 0 ${a} ${r}`).attr("width",a).attr("height",r),t.append("g").attr("transform",`translate(${n}, ${i})`)},"drawFrame"),D=o((t,e,a,r,n)=>{if("circle"===n)for(let i=0;i<r;i++){const e=a*(i+1)/r;t.append("circle").attr("r",e).attr("class","radarGraticule")}else if("polygon"===n){const n=e.length;for(let i=0;i<r;i++){const s=a*(i+1)/r,o=e.map((t,e)=>{const a=2*e*Math.PI/n-Math.PI/2;return`${s*Math.cos(a)},${s*Math.sin(a)}`}).join(" ");t.append("polygon").attr("points",o).attr("class","radarGraticule")}}},"drawGraticule"),_=o((t,e,a,r)=>{const n=e.length;for(let i=0;i<n;i++){const s=e[i].label,o=2*i*Math.PI/n-Math.PI/2;t.append("line").attr("x1",0).attr("y1",0).attr("x2",a*r.axisScaleFactor*Math.cos(o)).attr("y2",a*r.axisScaleFactor*Math.sin(o)).attr("class","radarAxisLine"),t.append("text").text(s).attr("x",a*r.axisLabelFactor*Math.cos(o)).attr("y",a*r.axisLabelFactor*Math.sin(o)).attr("class","radarAxisLabel")}},"drawAxes");function R(t,e,a,r,n,i,s){const o=e.length,l=Math.min(s.width,s.height)/2;a.forEach((e,a)=>{if(e.entries.length!==o)return;const c=e.entries.map((t,e)=>{const a=2*Math.PI*e/o-Math.PI/2,i=G(t,r,n,l);return{x:i*Math.cos(a),y:i*Math.sin(a)}});"circle"===i?t.append("path").attr("d",q(c,s.curveTension)).attr("class",`radarCurve-${a}`):"polygon"===i&&t.append("polygon").attr("points",c.map(t=>`${t.x},${t.y}`).join(" ")).attr("class",`radarCurve-${a}`)})}function G(t,e,a,r){return r*(Math.min(Math.max(t,e),a)-e)/(a-e)}function q(t,e){const a=t.length;let r=`M${t[0].x},${t[0].y}`;for(let n=0;n<a;n++){const i=t[(n-1+a)%a],s=t[n],o=t[(n+1)%a],l=t[(n+2)%a],c={x:s.x+(o.x-i.x)*e,y:s.y+(o.y-i.y)*e},u={x:o.x-(l.x-s.x)*e,y:o.y-(l.y-s.y)*e};r+=` C${c.x},${c.y} ${u.x},${u.y} ${o.x},${o.y}`}return`${r} Z`}function W(t,e,a,r){if(!a)return;const n=3*(r.width/2+r.marginRight)/4,i=3*-(r.height/2+r.marginTop)/4;e.forEach((e,a)=>{const r=t.append("g").attr("transform",`translate(${n}, ${i+20*a})`);r.append("rect").attr("width",12).attr("height",12).attr("class",`radarLegendBox-${a}`),r.append("text").attr("x",16).attr("y",0).attr("class","radarLegendText").text(e.label)})}o(R,"drawCurves"),o(G,"relativeRadius"),o(q,"closedRoundCurve"),o(W,"drawLegend");var H={draw:F},V=o((t,e)=>{let a="";for(let r=0;r<t.THEME_COLOR_LIMIT;r++){const n=t[`cScale${r}`];a+=`\n\t\t.radarCurve-${r} {\n\t\t\tcolor: ${n};\n\t\t\tfill: ${n};\n\t\t\tfill-opacity: ${e.curveOpacity};\n\t\t\tstroke: ${n};\n\t\t\tstroke-width: ${e.curveStrokeWidth};\n\t\t}\n\t\t.radarLegendBox-${r} {\n\t\t\tfill: ${n};\n\t\t\tfill-opacity: ${e.curveOpacity};\n\t\t\tstroke: ${n};\n\t\t}\n\t\t`}return a},"genIndexStyles"),K=o(t=>{const e=y(),a=v(),r=x(e,a.themeVariables);return{themeVariables:r,radarOptions:x(r.radar,t)}},"buildRadarStyleOptions"),Q={parser:z,db:P,renderer:H,styles:o(({radar:t}={})=>{const{themeVariables:e,radarOptions:a}=K(t);return`\n\t.radarTitle {\n\t\tfont-size: ${e.fontSize};\n\t\tcolor: ${e.titleColor};\n\t\tdominant-baseline: hanging;\n\t\ttext-anchor: middle;\n\t}\n\t.radarAxisLine {\n\t\tstroke: ${a.axisColor};\n\t\tstroke-width: ${a.axisStrokeWidth};\n\t}\n\t.radarAxisLabel {\n\t\tdominant-baseline: middle;\n\t\ttext-anchor: middle;\n\t\tfont-size: ${a.axisLabelFontSize}px;\n\t\tcolor: ${a.axisColor};\n\t}\n\t.radarGraticule {\n\t\tfill: ${a.graticuleColor};\n\t\tfill-opacity: ${a.graticuleOpacity};\n\t\tstroke: ${a.graticuleColor};\n\t\tstroke-width: ${a.graticuleStrokeWidth};\n\t}\n\t.radarLegendText {\n\t\ttext-anchor: start;\n\t\tfont-size: ${a.legendFontSize}px;\n\t\tdominant-baseline: hanging;\n\t}\n\t${V(e,a)}\n\t`},"styles")};export{Q as diagram};
