var e,t=Object.defineProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(e,a,n)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,o=(e,t)=>{for(var o in t||(t={}))n.call(t,o)&&l(e,o,t[o]);if(a)for(var o of a(t))r.call(t,o)&&l(e,o,t[o]);return e};import{s}from"./chunk-SKB7J2MH-BlwHRDiW-DKjgZhLA.js";import{_ as i,F as c,G as d,K as p,e as h,l as u,aO as f,d as m,b as y,a as g,q as v,t as x,g as S,s as b,H as C,aP as w,z as $}from"./mermaid.core-CAqkCmS1-CLT7ovuR.js";import{p as L}from"./chunk-353BL4L5-Dn_Y_Yna-DGDQ9ioY.js";import{p as M}from"./treemap-75Q7IDZK-B2atdfMH-Da2_3W7b.js";import{b as k}from"./defaultLocale-DVr69WTU-Cz8hFv87.js";import{o as T}from"./ordinal-DSZU4PqD-6GfLQBXW.js";import"./index-BXUoDM4E.js";import"./vue-vendor-D2t9Cmv9.js";import"./element-plus-B8hAHzIr.js";import"./utils-DeELuwUN.js";import"./_baseUniq-BXtq6_NW-B_p-0Ilj.js";import"./min-BngCxx8g-8y_75bUg.js";import"./clone-CEJtuQzg-Dv-tN7iV.js";import"./init-ZxktEp_H-C0SZ43gy.js";function z(e){var t=0,a=e.children,n=a&&a.length;if(n)for(;--n>=0;)t+=a[n].value;else t=1;e.value=t}function j(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=B)):void 0===t&&(t=P);for(var a,n,r,l,o,s=new N(e),i=[s];a=i.pop();)if((r=t(a.data))&&(o=(r=Array.from(r)).length))for(a.children=r,l=o-1;l>=0;--l)i.push(n=r[l]=new N(r[l])),n.parent=a,n.depth=a.depth+1;return s.eachBefore(A)}function P(e){return e.children}function B(e){return Array.isArray(e)?e[1]:null}function F(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function A(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function N(e){this.data=e,this.depth=this.height=0,this.parent=null}function D(){return 0}function W(e){return function(){return e}}function E(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function H(e,t,a,n,r){for(var l,o=e.children,s=-1,i=o.length,c=e.value&&(n-t)/e.value;++s<i;)(l=o[s]).y0=a,l.y1=r,l.x0=t,l.x1=t+=l.value*c}function I(e,t,a,n,r){for(var l,o=e.children,s=-1,i=o.length,c=e.value&&(r-a)/e.value;++s<i;)(l=o[s]).x0=t,l.x1=n,l.y0=a,l.y1=a+=l.value*c}N.prototype=j.prototype={constructor:N,count:function(){return this.eachAfter(z)},each:function(e,t){let a=-1;for(const n of this)e.call(t,n,++a,this);return this},eachAfter:function(e,t){for(var a,n,r,l=this,o=[l],s=[],i=-1;l=o.pop();)if(s.push(l),a=l.children)for(n=0,r=a.length;n<r;++n)o.push(a[n]);for(;l=s.pop();)e.call(t,l,++i,this);return this},eachBefore:function(e,t){for(var a,n,r=this,l=[r],o=-1;r=l.pop();)if(e.call(t,r,++o,this),a=r.children)for(n=a.length-1;n>=0;--n)l.push(a[n]);return this},find:function(e,t){let a=-1;for(const n of this)if(e.call(t,n,++a,this))return n},sum:function(e){return this.eachAfter(function(t){for(var a=+e(t.data)||0,n=t.children,r=n&&n.length;--r>=0;)a+=n[r].value;t.value=a})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,a=function(e,t){if(e===t)return e;var a=e.ancestors(),n=t.ancestors(),r=null;e=a.pop(),t=n.pop();for(;e===t;)r=e,e=a.pop(),t=n.pop();return r}(t,e),n=[t];t!==a;)t=t.parent,n.push(t);for(var r=n.length;e!==a;)n.splice(r,0,e),e=e.parent;return n},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(a){a!==e&&t.push({source:a.parent,target:a})}),t},copy:function(){return j(this).eachBefore(F)},[Symbol.iterator]:function*(){var e,t,a,n,r=this,l=[r];do{for(e=l.reverse(),l=[];r=e.pop();)if(yield r,t=r.children)for(a=0,n=t.length;a<n;++a)l.push(t[a])}while(l.length)}};const O=function e(t){function a(e,a,n,r,l){!function(e,t,a,n,r,l){for(var o,s,i,c,d,p,h,u,f,m,y,g=[],v=t.children,x=0,S=0,b=v.length,C=t.value;x<b;){i=r-a,c=l-n;do{d=v[S++].value}while(!d&&S<b);for(p=h=d,y=d*d*(m=Math.max(c/i,i/c)/(C*e)),f=Math.max(h/y,y/p);S<b;++S){if(d+=s=v[S].value,s<p&&(p=s),s>h&&(h=s),y=d*d*m,(u=Math.max(h/y,y/p))>f){d-=s;break}f=u}g.push(o={value:d,dice:i<c,children:v.slice(x,S)}),o.dice?H(o,a,n,r,C?n+=c*d/C:l):I(o,a,n,C?a+=i*d/C:r,l),C-=d,x=S}}(t,e,a,n,r,l)}return a.ratio=function(t){return e((t=+t)>1?t:1)},a}((1+Math.sqrt(5))/2);function R(){var e=O,t=!1,a=1,n=1,r=[0],l=D,o=D,s=D,i=D,c=D;function d(e){return e.x0=e.y0=0,e.x1=a,e.y1=n,e.eachBefore(p),r=[0],t&&e.eachBefore(E),e}function p(t){var a=r[t.depth],n=t.x0+a,d=t.y0+a,p=t.x1-a,h=t.y1-a;p<n&&(n=p=(n+p)/2),h<d&&(d=h=(d+h)/2),t.x0=n,t.y0=d,t.x1=p,t.y1=h,t.children&&(a=r[t.depth+1]=l(t)/2,n+=c(t)-a,d+=o(t)-a,(p-=s(t)-a)<n&&(n=p=(n+p)/2),(h-=i(t)-a)<d&&(d=h=(d+h)/2),e(t,n,d,p,h))}return d.round=function(e){return arguments.length?(t=!!e,d):t},d.size=function(e){return arguments.length?(a=+e[0],n=+e[1],d):[a,n]},d.tile=function(t){return arguments.length?(e=function(e){if("function"!=typeof e)throw new Error;return e}(t),d):e},d.padding=function(e){return arguments.length?d.paddingInner(e).paddingOuter(e):d.paddingInner()},d.paddingInner=function(e){return arguments.length?(l="function"==typeof e?e:W(+e),d):l},d.paddingOuter=function(e){return arguments.length?d.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):d.paddingTop()},d.paddingTop=function(e){return arguments.length?(o="function"==typeof e?e:W(+e),d):o},d.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:W(+e),d):s},d.paddingBottom=function(e){return arguments.length?(i="function"==typeof e?e:W(+e),d):i},d.paddingLeft=function(e){return arguments.length?(c="function"==typeof e?e:W(+e),d):c},d}var V=(i(e=class{constructor(){this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.setAccTitle=y,this.getAccTitle=g,this.setDiagramTitle=v,this.getDiagramTitle=x,this.getAccDescription=S,this.setAccDescription=b}getNodes(){return this.nodes}getConfig(){var e;const t=C,a=d();return c(o(o({},t.treemap),null!=(e=a.treemap)?e:{}))}addNode(e,t){this.nodes.push(e),this.levels.set(e,t),0===t&&(this.outerNodes.push(e),null!=this.root||(this.root=e))}getRoot(){return{name:"",children:this.outerNodes}}addClass(e,t){var a;const n=null!=(a=this.classes.get(e))?a:{id:e,styles:[],textStyles:[]},r=t.replace(/\\,/g,"§§§").replace(/,/g,";").replace(/§§§/g,",").split(";");r&&r.forEach(e=>{w(e)&&((null==n?void 0:n.textStyles)?n.textStyles.push(e):n.textStyles=[e]),(null==n?void 0:n.styles)?n.styles.push(e):n.styles=[e]}),this.classes.set(e,n)}getClasses(){return this.classes}getStylesForClass(e){var t,a;return null!=(t=null==(a=this.classes.get(e))?void 0:a.styles)?t:[]}clear(){$(),this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.root=void 0}},"TreeMapDB"),e);function q(e){if(!e.length)return[];const t=[],a=[];return e.forEach(e=>{const n={name:e.name,children:"Leaf"===e.type?void 0:[]};for(n.classSelector=null==e?void 0:e.classSelector,(null==e?void 0:e.cssCompiledStyles)&&(n.cssCompiledStyles=[e.cssCompiledStyles]),"Leaf"===e.type&&void 0!==e.value&&(n.value=e.value);a.length>0&&a[a.length-1].level>=e.level;)a.pop();if(0===a.length)t.push(n);else{const e=a[a.length-1].node;e.children?e.children.push(n):e.children=[n]}"Leaf"!==e.type&&a.push({node:n,level:e.level})}),t}i(q,"buildHierarchy");var _=i((e,t)=>{var a,n,r,l;L(e,t);const o=[];for(const i of null!=(a=e.TreemapRows)?a:[])"ClassDefStatement"===i.$type&&t.addClass(null!=(n=i.className)?n:"",null!=(r=i.styleText)?r:"");for(const i of null!=(l=e.TreemapRows)?l:[]){const e=i.item;if(!e)continue;const a=i.indent?parseInt(i.indent):0,n=G(e),r=e.classSelector?t.getStylesForClass(e.classSelector):[],l=r.length>0?r.join(";"):void 0,s={level:a,name:n,type:e.$type,value:e.value,classSelector:e.classSelector,cssCompiledStyles:l};o.push(s)}const s=q(o),c=i((e,a)=>{for(const n of e)t.addNode(n,a),n.children&&n.children.length>0&&c(n.children,a+1)},"addNodesRecursively");c(s,0)},"populate"),G=i(e=>e.name?String(e.name):"","getItemName"),K={parser:{yy:void 0},parse:i(e=>{return t=null,a=null,n=function*(){var t;try{const a=M,n=yield a("treemap",e);u.debug("Treemap AST:",n);const r=null==(t=K.parser)?void 0:t.yy;if(!(r instanceof V))throw new Error("parser.parser?.yy was not a TreemapDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");_(n,r)}catch(a){throw u.error("Error parsing treemap:",a),a}},new Promise((e,r)=>{var l=e=>{try{s(n.next(e))}catch(t){r(t)}},o=e=>{try{s(n.throw(e))}catch(t){r(t)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(l,o);s((n=n.apply(t,a)).next())});var t,a,n},"parse")},U=10,Z={draw:i((e,t,a,n)=>{var r,l;const o=n.db,c=o.getConfig(),y=null!=(r=c.padding)?r:10,g=o.getDiagramTitle(),v=o.getRoot(),{themeVariables:x}=d();if(!v)return;const S=g?30:0,b=p(t),C=c.nodeWidth?c.nodeWidth*U:960,w=c.nodeHeight?c.nodeHeight*U:500,$=C,L=w+S;let M;b.attr("viewBox",`0 0 ${$} ${L}`),h(b,L,$,c.useMaxWidth);try{const e=c.valueFormat||",";if("$0,0"===e)M=i(e=>"$"+k(",")(e),"valueFormat");else if(e.startsWith("$")&&e.includes(",")){const t=/\.\d+/.exec(e),a=t?t[0]:"";M=i(e=>"$"+k(","+a)(e),"valueFormat")}else if(e.startsWith("$")){const t=e.substring(1);M=i(e=>"$"+k(t||"")(e),"valueFormat")}else M=k(e)}catch(O){u.error("Error creating format function:",O),M=k(",")}const z=T().range(["transparent",x.cScale0,x.cScale1,x.cScale2,x.cScale3,x.cScale4,x.cScale5,x.cScale6,x.cScale7,x.cScale8,x.cScale9,x.cScale10,x.cScale11]),P=T().range(["transparent",x.cScalePeer0,x.cScalePeer1,x.cScalePeer2,x.cScalePeer3,x.cScalePeer4,x.cScalePeer5,x.cScalePeer6,x.cScalePeer7,x.cScalePeer8,x.cScalePeer9,x.cScalePeer10,x.cScalePeer11]),B=T().range([x.cScaleLabel0,x.cScaleLabel1,x.cScaleLabel2,x.cScaleLabel3,x.cScaleLabel4,x.cScaleLabel5,x.cScaleLabel6,x.cScaleLabel7,x.cScaleLabel8,x.cScaleLabel9,x.cScaleLabel10,x.cScaleLabel11]);g&&b.append("text").attr("x",$/2).attr("y",S/2).attr("class","treemapTitle").attr("text-anchor","middle").attr("dominant-baseline","middle").text(g);const F=b.append("g").attr("transform",`translate(0, ${S})`).attr("class","treemapContainer"),A=j(v).sum(e=>{var t;return null!=(t=e.value)?t:0}).sort((e,t)=>{var a,n;return(null!=(a=t.value)?a:0)-(null!=(n=e.value)?n:0)}),N=R().size([C,w]).paddingTop(e=>e.children&&e.children.length>0?35:0).paddingInner(y).paddingLeft(e=>e.children&&e.children.length>0?U:0).paddingRight(e=>e.children&&e.children.length>0?U:0).paddingBottom(e=>e.children&&e.children.length>0?U:0).round(!0)(A),D=N.descendants().filter(e=>e.children&&e.children.length>0),W=F.selectAll(".treemapSection").data(D).enter().append("g").attr("class","treemapSection").attr("transform",e=>`translate(${e.x0},${e.y0})`);W.append("rect").attr("width",e=>e.x1-e.x0).attr("height",25).attr("class","treemapSectionHeader").attr("fill","none").attr("fill-opacity",.6).attr("stroke-width",.6).attr("style",e=>0===e.depth?"display: none;":""),W.append("clipPath").attr("id",(e,a)=>`clip-section-${t}-${a}`).append("rect").attr("width",e=>Math.max(0,e.x1-e.x0-12)).attr("height",25),W.append("rect").attr("width",e=>e.x1-e.x0).attr("height",e=>e.y1-e.y0).attr("class",(e,t)=>`treemapSection section${t}`).attr("fill",e=>z(e.data.name)).attr("fill-opacity",.6).attr("stroke",e=>P(e.data.name)).attr("stroke-width",2).attr("stroke-opacity",.4).attr("style",e=>{if(0===e.depth)return"display: none;";const t=f({cssCompiledStyles:e.data.cssCompiledStyles});return t.nodeStyles+";"+t.borderStyles.join(";")}),W.append("text").attr("class","treemapSectionLabel").attr("x",6).attr("y",12.5).attr("dominant-baseline","middle").text(e=>0===e.depth?"":e.data.name).attr("font-weight","bold").attr("style",e=>{if(0===e.depth)return"display: none;";return"dominant-baseline: middle; font-size: 12px; fill:"+B(e.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"+f({cssCompiledStyles:e.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")}).each(function(e){if(0===e.depth)return;const t=m(this),a=e.data.name;t.text(a);const n=e.x1-e.x0;let r;if(!1!==c.showValues&&e.value){r=n-10-30-10-6}else{r=n-6-6}const l=Math.max(15,r),o=t.node();if(o.getComputedTextLength()>l){const e="...";let n=a;for(;n.length>0;){if(n=a.substring(0,n.length-1),0===n.length){t.text(e),o.getComputedTextLength()>l&&t.text("");break}if(t.text(n+e),o.getComputedTextLength()<=l)break}}}),!1!==c.showValues&&W.append("text").attr("class","treemapSectionValue").attr("x",e=>e.x1-e.x0-10).attr("y",12.5).attr("text-anchor","end").attr("dominant-baseline","middle").text(e=>e.value?M(e.value):"").attr("font-style","italic").attr("style",e=>{if(0===e.depth)return"display: none;";return"text-anchor: end; dominant-baseline: middle; font-size: 10px; fill:"+B(e.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"+f({cssCompiledStyles:e.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")});const E=N.leaves(),H=F.selectAll(".treemapLeafGroup").data(E).enter().append("g").attr("class",(e,t)=>`treemapNode treemapLeafGroup leaf${t}${e.data.classSelector?` ${e.data.classSelector}`:""}x`).attr("transform",e=>`translate(${e.x0},${e.y0})`);H.append("rect").attr("width",e=>e.x1-e.x0).attr("height",e=>e.y1-e.y0).attr("class","treemapLeaf").attr("fill",e=>e.parent?z(e.parent.data.name):z(e.data.name)).attr("style",e=>f({cssCompiledStyles:e.data.cssCompiledStyles}).nodeStyles).attr("fill-opacity",.3).attr("stroke",e=>e.parent?z(e.parent.data.name):z(e.data.name)).attr("stroke-width",3),H.append("clipPath").attr("id",(e,a)=>`clip-${t}-${a}`).append("rect").attr("width",e=>Math.max(0,e.x1-e.x0-4)).attr("height",e=>Math.max(0,e.y1-e.y0-4));if(H.append("text").attr("class","treemapLabel").attr("x",e=>(e.x1-e.x0)/2).attr("y",e=>(e.y1-e.y0)/2).attr("style",e=>"text-anchor: middle; dominant-baseline: middle; font-size: 38px;fill:"+B(e.data.name)+";"+f({cssCompiledStyles:e.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")).attr("clip-path",(e,a)=>`url(#clip-${t}-${a})`).text(e=>e.data.name).each(function(e){const t=m(this),a=e.x1-e.x0,n=e.y1-e.y0,r=t.node(),l=a-8,o=n-8;if(l<10||o<10)return void t.style("display","none");let s=parseInt(t.style("font-size"),10);for(;r.getComputedTextLength()>l&&s>8;)s--,t.style("font-size",`${s}px`);let i=Math.max(6,Math.min(28,Math.round(.6*s))),c=s+2+i;for(;c>o&&s>8&&(s--,i=Math.max(6,Math.min(28,Math.round(.6*s))),!(i<6&&8===s));)t.style("font-size",`${s}px`),c=s+2+i;t.style("font-size",`${s}px`),(r.getComputedTextLength()>l||s<8||o<s)&&t.style("display","none")}),!1!==c.showValues){H.append("text").attr("class","treemapValue").attr("x",e=>(e.x1-e.x0)/2).attr("y",function(e){return(e.y1-e.y0)/2}).attr("style",e=>"text-anchor: middle; dominant-baseline: hanging; font-size: 28px;fill:"+B(e.data.name)+";"+f({cssCompiledStyles:e.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")).attr("clip-path",(e,a)=>`url(#clip-${t}-${a})`).text(e=>e.value?M(e.value):"").each(function(e){const t=m(this),a=this.parentNode;if(!a)return void t.style("display","none");const n=m(a).select(".treemapLabel");if(n.empty()||"none"===n.style("display"))return void t.style("display","none");const r=parseFloat(n.style("font-size")),l=Math.max(6,Math.min(28,Math.round(.6*r)));t.style("font-size",`${l}px`);const o=(e.y1-e.y0)/2+r/2+2;t.attr("y",o);const s=e.x1-e.x0,i=e.y1-e.y0-4,c=s-8;t.node().getComputedTextLength()>c||o+l>i||l<6?t.style("display","none"):t.style("display",null)})}const I=null!=(l=c.diagramPadding)?l:8;s(b,I,"flowchart",(null==c?void 0:c.useMaxWidth)||!1)},"draw"),getClasses:i(function(e,t){return t.db.getClasses()},"getClasses")},J={sectionStrokeColor:"black",sectionStrokeWidth:"1",sectionFillColor:"#efefef",leafStrokeColor:"black",leafStrokeWidth:"1",leafFillColor:"#efefef",labelColor:"black",labelFontSize:"12px",valueFontSize:"10px",valueColor:"black",titleColor:"black",titleFontSize:"14px"},Q=i(({treemap:e}={})=>{const t=c(J,e);return`\n  .treemapNode.section {\n    stroke: ${t.sectionStrokeColor};\n    stroke-width: ${t.sectionStrokeWidth};\n    fill: ${t.sectionFillColor};\n  }\n  .treemapNode.leaf {\n    stroke: ${t.leafStrokeColor};\n    stroke-width: ${t.leafStrokeWidth};\n    fill: ${t.leafFillColor};\n  }\n  .treemapLabel {\n    fill: ${t.labelColor};\n    font-size: ${t.labelFontSize};\n  }\n  .treemapValue {\n    fill: ${t.valueColor};\n    font-size: ${t.valueFontSize};\n  }\n  .treemapTitle {\n    fill: ${t.titleColor};\n    font-size: ${t.titleFontSize};\n  }\n  `},"getStyles"),Y={parser:K,get db(){return new V},renderer:Z,styles:Q};export{Y as diagram};
